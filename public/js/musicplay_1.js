webpackJsonp([16,53],[function(e,t,n){var o;o=function(){var e=n(3),t=n(15),o=(n(2),n(17)),a=n(16),i=n(2).reportUserAction,r=document.domain.indexOf("migu.cn")>-1?"migu.cn":document.domain,s={getPlayUrl:function(n,i){t.openAudioPlayer();var s=this,c=[];document.cookie="playlist_adding=1;path=/;domain="+r,$.ajax({url:MUSIC_CONFIG.APP_BASE_PATH+"/async/audioplayer/getplayurl",type:"post",data:{songId:n.join(",")}}).done(function(n){if($.each(n,function(){var e=this,t={};t.id=e.musicId,t.name=e.musicName,t.singerInfo=e.artistId,t.productId=e.productId,t.albumId=e.albumId,t.albumName=e.albumName,e.copyrightId&&e.songAuditionUrl&&c.push(t)}),c.length){$.jStorage.reInit();var a=JSON.parse(o.get("temp_playlist")),u=s.arrayUnique(c.concat(a));setTimeout(function(){o.set("temp_playlist",JSON.stringify(u))},500),t.addSong(s.arrayUnique(c),i),e.tip("已添加至音乐播放器")}else e.tip("暂无版权，咪咕君正在引进中~"),document.cookie="playlist_overlay=1;path=/;domain="+r}).fail(function(){alert("暂无版权，咪咕君正在引进中~"),document.cookie="playlist_overlay=1;path=/;domain="+r,a.set("PLAYDISABLED",0,{domain:document.domain})})},arrayUnique:function(e){for(var t={},n=[],o=0;o<e.length;o++)t[e[o].id]||(t[e[o].id]=!0,n.push(e[o]));return n},recordListend:function(e){$.ajax({url:MUSIC_CONFIG.APP_BASE_PATH+"/async/audioplayer/recordlistened",type:"get",data:{copyrightId:e}}).done(function(){}).fail(function(){})},addToPlayer:function(n,a){if(n.length){$.jStorage.reInit();var i=JSON.parse(o.get("temp_playlist")),s=this.arrayUnique(n.concat(i));setTimeout(function(){o.set("temp_playlist",JSON.stringify(s))},500),t.addSong(n,a),e.tip("已添加至音乐播放器")}else e.tip("暂无版权，咪咕君正在引进中~"),document.cookie="playlist_overlay=1;path=/;domain="+r},getSongListSong:function(n,o){var s=a.get("PLAYDISABLED");if(1!=s){document.cookie="playlist_adding=1;path=/;domain="+r,t.openAudioPlayer(),a.set("PLAYDISABLED",1,{domain:document.domain});var c=this;setTimeout(function(){a.set("PLAYDISABLED",0,{domain:document.domain})},1500),$.ajax({url:MUSIC_CONFIG.APP_BASE_PATH+"/async/songlistsong",data:{songListId:n.id,userId:n.userid,type:n.type,tagInfo:n.tagInfo}}).done(function(t){var a=[];$.each(t.items,function(){if(this.copyrightMsg&&this.copyrightMsg.hasWalkMan&&this.song.status){var e={name:this.song.musicName,id:this.song.musicId,singerInfo:this.song.artistId,productId:this.copyrightMsg.fullSongProductId,albumId:this.song.albumId,albumName:this.song.albumName};a.push(e)}}),a.length?(c.addToPlayer(a,o),o&&i({ruleId:49,actionObjectId:n.id})):(e.tip("播放失败，歌单暂无歌曲"),document.cookie="playlist_overlay=1;path=/;domain="+r)}).fail(function(){document.cookie="playlist_overlay=1;path=/;domain="+r})}},getAlbumSong:function(n,o){var i=a.get("PLAYDISABLED");if(1!=i){t.openAudioPlayer(),document.cookie="playlist_adding=1;path=/;domain="+r,a.set("PLAYDISABLED",1,{domain:document.domain});var s=this;setTimeout(function(){a.set("PLAYDISABLED",0,{domain:document.domain})},1500),$.ajax({url:MUSIC_CONFIG.APP_BASE_PATH+"/async/getalbumsong",async:!1,data:{albumId:n}}).done(function(t){var n=[];$.each(t.items,function(){if(this.copyrightMsg&&this.copyrightMsg.hasWalkMan&&this.song.status){var e={name:this.song.musicName,id:this.song.musicId,singerInfo:this.song.artistId,productId:this.copyrightMsg.fullSongProductId,albumId:this.song.albumId,albumName:this.song.albumName};n.push(e)}}),n.length>0?s.addToPlayer(n,o):(e.tip("暂无法播放该专辑歌曲"),document.cookie="playlist_overlay=1;path=/;domain="+r)}).fail(function(){document.cookie="playlist_overlay=1;path=/;domain="+r})}}};return window.MUSIC_GLOBAL.musicPlay=s,s}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},,function(e,t,n){var o;o=function(){var e={mobileRegex:/^(1)\d{10}$/,fetchApi:function(e){var e=e||{},t=$.Deferred(),n=t.promise();$.ajax(e).done(function(e,n,o){200===o.status&&4===o.readyState?t.resolve(e):t.reject(e)});return n},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null},setCookie:function(e,t,n){var o,a;return o=e+"="+encodeURIComponent(t),n=n||{},n.expires&&(a=new Date((new Date).getTime()+6e4*n.expires*60*24),o+=";expires="+a.toGMTString()),n.path&&(o+=";path="+n.path),n.domain&&(o+=";domain="+n.domain),n.secure&&(o+=";secure"),document.cookie=o},getCookie:function(e){var t,n,o;return n=document.cookie,t=e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e}),o=n.match(new RegExp("(?:^|; )"+t+"=([^;]*)")),o?decodeURIComponent(o[1]):void 0},removeCookie:function(e,t,n){var o,a=this;if(a.getCookie(e))return o=e+"=;expires=Fri, 02-Jan-1970 00:00:00 GMT",t&&(o+=";path="+t),n&&(o+=";domain"+n),document.cookie=o},createTips:function(e){var t='<div id="text-tip"><span>'+e+"</span></div>",n=$("#text-tip");n&&n.remove(),$("body").append(t),setTimeout(function(){var e=$("#text-tip");e.remove()},3e3)},reportUserAction:function(t){if(t.ruleId&&t.actionObjectId){var n={type:"POST",url:MUSIC_CONFIG.APP_BASE_PATH+"/async/user/report",cache:!1,name:"用户行为统计上报",data:{ruleId:t.ruleId,actionObjectId:t.actionObjectId,channelId:t.channelId}};e.fetchApi(n).then(function(e){"function"==typeof t.success&&t.success(e)})}}};return e}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var o,o;o=function(){var a,i={},r=$("body"),s={},c=n(4),u={v:"1.0",index:0,Zindex:200,confirm:function(e){var t=$.extend({},e,{type:"confirm"});return u.open(t)},tip:function(e,t){var n={type:"tip",container:e,closeBtn:!1,isOverlay:!1,time:t||1500};return u.open(n)},loading:function(e){var e=$.extend({closeBtn:!1,isLoding:!0,type:0,text:"拼命加载中...",showText:!1},e);return u.open(e)}},d=function(){this.defaults={container:null,isOverlay:!0,overlayClose:!1,closeBtn:!0,success:null,end:null}};d.prototype={getOptions:function(e){return $.extend({},this.defaults,e)},removeNode:function(e){e.remove()}};var l=new d,p=function(e,t){var n;return function(){return n=$('<div id="overlay'+e+'" class="overlay"></div>'),n.css({margin:0,padding:0,border:"none",width:"100%",height:"100%","z-index":t,background:"#000",opacity:"0.5",filter:"alpha(opacity=50)",position:"fixed",top:0,left:0}),n}()},f=function(e){var t;return function(){t=$('<div class="dialog-header"></div>');var n=$('<span class="dialog-title">'+i.title+"</span>"),o=$('<i class="dialog-close iconfont cf-close" id="dialog_close'+e+'" title="关闭"></i>');return t.append(n).append(o),t}()},g=function(e){var t=this;t.index=++u.index,t.Zindex=u.Zindex+t.index,t.creat()};return g.pt=g.prototype,g.pt.creat=function(){var e=this,t=e.index,n=e.Zindex,o=$('<div id="dialog_box'+t+'" class="dialog_box"></div>');if(o.css({margin:0,padding:0,width:i.width||"auto",height:i.height||"auto","z-index":n,top:"50%",left:"50%",position:"fixed","background-color":i.isLoding?"transparent":"#fff",textAlign:i.isLoding?"center":"left","min-width":i.width?0:400}),i.isLoding&&o.html(c(i)),i.title)o.append(f(t));else if(i.closeBtn){var s=$('<i class="dialog-close iconfont cf-close cf-diff-close" id="dialog_close'+t+'" title="关闭"></i>');o.append(s)}if(i.isOverlay){var d=p(t,n);r.append(d)}if(r.append(o),"confirm"===i.type){e.yes=i.yes,e.cancel=i.cancel,a=$('<div class="confirm-layer"></div>');var l=$('<span class="btn-sure">确&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定</span>'),g=$('<span href="javascript:;" class="btn-cancel">取&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;消</span>');a.html('<div class="confirm-text">'+i.container+'</div><div class="operate-btn"></div>'),a.find(".operate-btn").append(l).append(g),l.click(function(){"function"==typeof e.yes&&e.yes()}),g.click(function(){"function"==typeof e.cancel&&e.cancel()})}else"tip"===i.type?(a=$('<div class="text-tip"></div>'),$("body").append('<div class="text-tip-overlay"></div>'),a.html(i.container),setTimeout(function(){$(".text-tip-overlay").remove(),u.close(t)},i.time)):a=$(i.container);return o.append(a),"tip"===i.type&&a.parent().css("background","transparent"),u.reset(t),o.find(".dialog-close").click(function(){u.close(t)}),i.overlayClose&&d.click(function(){u.close(t)}),"function"==typeof i.success&&i.success(e.index),o},u.close=function(e){if(!e)return $(".overlay").remove(),void $(".dialog_box").remove();var t=$("#overlay"+e);t&&l.removeNode(t),l.removeNode($("#dialog_box"+e)),"function"==typeof i.end&&i.end()},u.reset=function(e){var t=$("#dialog_box"+e),n=t.width(),o=t.height();t.css({"margin-top":-o/2,"margin-left":-n/2})},s.run=function(){u.open=function(e){i=l.getOptions(e);var t=(i.type,new g);return t.index}},o=function(){return s.run(),u}.call(t,n,t,e),!(void 0!==o&&(e.exports=o)),u}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){function o(e){var t,n="",o=e||{};return function(e,o,i){switch(i){case 1:var r="upload";break;default:var r="loading"}n=n+"<div"+(a.attr("class",a.classes([r],[!0]),!1,!0)+' id="loading"')+">",e&&(n=n+"<span>"+a.escape(null==(t=o)?"":t)+"</span>"),n+="</div>"}.call(this,"showText"in o?o.showText:"undefined"!=typeof showText?showText:void 0,"text"in o?o.text:"undefined"!=typeof text?text:void 0,"type"in o?o.type:"undefined"!=typeof type?type:void 0),n}var a=n(5);e.exports=o},function(e,t,n){"use strict";function o(e,t){if(1===arguments.length){for(var n=e[0],a=1;a<e.length;a++)n=o(n,e[a]);return n}for(var i in t)if("class"===i){var r=e[i]||[];e[i]=(Array.isArray(r)?r:[r]).concat(t[i]||[])}else if("style"===i){var r=s(e[i]),c=s(t[i]);e[i]=r+c}else e[i]=t[i];return e}function a(e,t){for(var n,o="",a="",i=Array.isArray(t),s=0;s<e.length;s++)n=r(e[s]),n&&(i&&t[s]&&(n=d(n)),o=o+a+n,a=" ");return o}function i(e){var t="",n="";for(var o in e)o&&e[o]&&p.call(e,o)&&(t=t+n+o,n=" ");return t}function r(e,t){return Array.isArray(e)?a(e,t):e&&"object"==typeof e?i(e):e||""}function s(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)p.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+="",";"!==e[e.length-1]?e+";":e}function c(e,t,n,o){return t!==!1&&null!=t&&(t||"class"!==e&&"style"!==e)?t===!0?" "+(o?e:e+'="'+e+'"'):("function"==typeof t.toJSON&&(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||t.indexOf('"')===-1)?(n&&(t=d(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"):""}function u(e,t){var n="";for(var o in e)if(p.call(e,o)){var a=e[o];if("class"===o){a=r(a),n=c(o,a,!1,t)+n;continue}"style"===o&&(a=s(a)),n+=c(o,a,!1,t)}return n}function d(e){var t=""+e,n=f.exec(t);if(!n)return e;var o,a,i,r="";for(o=n.index,a=0;o<t.length;o++){switch(t.charCodeAt(o)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}a!==o&&(r+=t.substring(a,o)),a=o+1,r+=i}return a!==o?r+t.substring(a,o):r}function l(e,t,o,a){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||a))throw e.message+=" on line "+o,e;try{a=a||n(6).readFileSync(t,"utf8")}catch(t){l(e,null,o)}var i=3,r=a.split("\n"),s=Math.max(o-i,0),c=Math.min(r.length,o+i),i=r.slice(s,c).map(function(e,t){var n=t+s+1;return(n==o?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Pug")+":"+o+"\n"+i+"\n\n"+e.message,e}var p=Object.prototype.hasOwnProperty;t.merge=o,t.classes=r,t.style=s,t.attr=c,t.attrs=u;var f=/["&<>]/;t.escape=d,t.rethrow=l},function(e,t){},,,,,,,,,function(e,t,n){var o;o=function(){var e=n(16),t=n(17),o=document.domain.indexOf("migu.cn")>-1?"migu.cn":document.domain;return n(18),{id:"cafePlayer_migu_music",target:location.hostname+"_migu_player",timer:null,playerExists:function(){return 1===parseInt(e.get("audioplayer_open"))},openAWindow:function(e){$("body").append('<a id="openawindow" href="'+e+'" target="'+this.target+'"></a>'),$("#openawindow")[0].click(),setTimeout(function(){$("#openawindow").remove()},500)},openAudioPlayer:function(n){var a=this;a.playerExists()?(document.cookie="audioplayer_exist=0;path=/;domain="+o,n&&$.jStorage.publish("focusAudio",{status:!0}),a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){var n=parseInt(e.get("audioplayer_exist"));n||(t.set("playlist#"+a.id,"[]"),t.set("temp_playlist","[]"),MUSIC_CONFIG.IS_FROM_MIGU?a.openAWindow(MUSIC_CONFIG.APP_BASE_PATH+"/player/audio?_from=migu"):a.openAWindow(MUSIC_CONFIG.APP_BASE_PATH+"/player/audio"))},2e3)):(t.set("playlist#"+a.id,"[]"),t.set("temp_playlist","[]"),MUSIC_CONFIG.IS_FROM_MIGU?a.openAWindow(MUSIC_CONFIG.APP_BASE_PATH+"/player/audio?_from=migu"):a.openAWindow(MUSIC_CONFIG.APP_BASE_PATH+"/player/audio"))},addSong:function(e,t){localStorage.setItem("store_add_list",JSON.stringify(e)),document.cookie="playlist_change=1;path=/;domain="+o,t?document.cookie="add_play_now=1;path=/;domain="+o:document.cookie="add_play_now=0;path=/;domain="+o}}}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var o;!function(a,i){"use strict";var r=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var t=function(e,n,o){return 1===arguments.length?t.get(e):t.set(e,n,o)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var n=t._cache[t._cacheKeyPrefix+e];return n===i?i:decodeURIComponent(n)},t.set=function(e,n,o){return o=t._getExtendedOptions(o),o.expires=t._getExpiresDate(n===i?-1:o.expires),t._document.cookie=t._generateCookieString(e,n,o),t},t.expire=function(e,n){return t.set(e,i,n)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&e.secure!==i?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){if(n=n||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(n.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var o=e+"="+t;return o+=n.path?";path="+n.path:"",o+=n.domain?";domain="+n.domain:"",o+=n.expires?";expires="+n.expires.toUTCString():"",o+=n.secure?";secure":""},t._getCacheFromString=function(e){for(var n={},o=e?e.split("; "):[],a=0;a<o.length;a++){var r=t._getKeyValuePairFromCookieString(o[a]);n[t._cacheKeyPrefix+r.key]===i&&(n[t._cacheKeyPrefix+r.key]=r.value)}return n},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var n,o=e.substr(0,t);try{n=decodeURIComponent(o)}catch(e){console&&"function"==typeof console.error}return{key:n,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="cookies.js",n="1"===t.set(e,1).get(e);return t.expire(e),n},t.enabled=t._areEnabled(),t},s=a&&"object"==typeof a.document?r(a):r;o=function(){return s}.call(t,n,t,e),!(o!==i&&(e.exports=o))}("undefined"==typeof window?this:window)},function(e,t,n){var o;o=function(){return n(18),{set:function(e,t){return $.jStorage.set(e,t)},get:function(e){return $.jStorage.get(e)?$.jStorage.get(e):"[]"},clear:function(e){return $.jStorage.deleteKey(e)}}}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t){!function(){function e(){var e="{}";if("userDataBehavior"==_){g.load("jStorage");try{e=g.getAttribute("jStorage")}catch(e){}try{v=g.getAttribute("jStorage_update")}catch(e){}f.jStorage=e}a(),s(),c()}function t(){var t;clearTimeout(y),y=setTimeout(function(){if("localStorage"==_||"globalStorage"==_)t=f.jStorage_update;else if("userDataBehavior"==_){g.load("jStorage");try{t=g.getAttribute("jStorage_update")}catch(e){}}if(t&&t!=v){v=t;var o,a=d.parse(d.stringify(p.__jstorage_meta.CRC32));e(),o=d.parse(d.stringify(p.__jstorage_meta.CRC32));var i,r=[],s=[];for(i in a)a.hasOwnProperty(i)&&(o[i]?a[i]!=o[i]&&"2."==String(a[i]).substr(0,2)&&r.push(i):s.push(i));for(i in o)o.hasOwnProperty(i)&&(a[i]||r.push(i));n(r,"updated"),n(s,"deleted")}},25)}function n(e,t){e=[].concat(e||[]);var n,o,a,i;if("flushed"==t){e=[];for(n in h)h.hasOwnProperty(n)&&e.push(n);t="deleted"}for(n=0,a=e.length;n<a;n++){if(h[e[n]])for(o=0,i=h[e[n]].length;o<i;o++)h[e[n]][o](e[n],t);if(h["*"])for(o=0,i=h["*"].length;o<i;o++)h["*"][o](e[n],t)}}function o(){var e=(+new Date).toString();if("localStorage"==_||"globalStorage"==_)try{f.jStorage_update=e}catch(e){_=!1}else"userDataBehavior"==_&&(g.setAttribute("jStorage_update",e),g.save("jStorage"));t()}function a(){if(f.jStorage)try{p=d.parse(String(f.jStorage))}catch(e){f.jStorage="{}"}else f.jStorage="{}";m=f.jStorage?String(f.jStorage).length:0,p.__jstorage_meta||(p.__jstorage_meta={}),p.__jstorage_meta.CRC32||(p.__jstorage_meta.CRC32={})}function i(){if(p.__jstorage_meta.PubSub){for(var e=+new Date-2e3,t=0,n=p.__jstorage_meta.PubSub.length;t<n;t++)if(p.__jstorage_meta.PubSub[t][0]<=e){p.__jstorage_meta.PubSub.splice(t,p.__jstorage_meta.PubSub.length-t);break}p.__jstorage_meta.PubSub.length||delete p.__jstorage_meta.PubSub}try{f.jStorage=d.stringify(p),g&&(g.setAttribute("jStorage",f.jStorage),g.save("jStorage")),m=f.jStorage?String(f.jStorage).length:0}catch(e){}}function r(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==e)throw new TypeError("Reserved key name");return!0}function s(){var e,t,a,r,c=1/0,u=!1,d=[];if(clearTimeout(l),p.__jstorage_meta&&"object"==typeof p.__jstorage_meta.TTL){e=+new Date,a=p.__jstorage_meta.TTL,r=p.__jstorage_meta.CRC32;for(t in a)a.hasOwnProperty(t)&&(a[t]<=e?(delete a[t],delete r[t],delete p[t],u=!0,d.push(t)):a[t]<c&&(c=a[t]));1/0!=c&&(l=setTimeout(s,Math.min(c-e,2147483647))),u&&(i(),o(),n(d,"deleted"))}}function c(){var e;if(p.__jstorage_meta.PubSub){var t,n=w,o=[];for(e=p.__jstorage_meta.PubSub.length-1;0<=e;e--)t=p.__jstorage_meta.PubSub[e],t[0]>w&&(n=t[0],o.unshift(t));for(e=o.length-1;0<=e;e--){t=o[e][1];var a=o[e][2];if(S[t])for(var i=0,r=S[t].length;i<r;i++)try{S[t][i](t,d.parse(d.stringify(a)))}catch(e){}}w=n}}var u=window.jQuery||window.$||(window.$={}),d={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||u.parseJSON||u.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||u.toJSON};if("function"!=typeof d.parse||"function"!=typeof d.stringify)throw Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var l,p={__jstorage_meta:{CRC32:{}}},f={jStorage:"{}"},g=null,m=0,_=!1,h={},y=!1,v=0,S={},w=+new Date,b={isXML:function(e){return!!(e=(e?e.ownerDocument||e:0).documentElement)&&"HTML"!==e.nodeName},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(e){}}return!1},decode:function(e){var t="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return!!t&&(e=t.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),!!this.isXML(e)&&e)}};u.jStorage={version:"0.4.12",set:function(e,t,o){if(r(e),o=o||{},"undefined"==typeof t)return this.deleteKey(e),t;if(b.isXML(t))t={_is_xml:!0,xml:b.encode(t)};else{if("function"==typeof t)return;t&&"object"==typeof t&&(t=d.parse(d.stringify(t)))}p[e]=t;for(var a,i=p.__jstorage_meta.CRC32,s=d.stringify(t),c=s.length,u=2538058380^c,l=0;4<=c;)a=255&s.charCodeAt(l)|(255&s.charCodeAt(++l))<<8|(255&s.charCodeAt(++l))<<16|(255&s.charCodeAt(++l))<<24,a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16),a^=a>>>24,a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^a,c-=4,++l;switch(c){case 3:u^=(255&s.charCodeAt(l+2))<<16;case 2:u^=(255&s.charCodeAt(l+1))<<8;case 1:u^=255&s.charCodeAt(l),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)}return u^=u>>>13,u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16),i[e]="2."+((u^u>>>15)>>>0),this.setTTL(e,o.TTL||0),n(e,"updated"),t},get:function(e,t){return r(e),e in p?p[e]&&"object"==typeof p[e]&&p[e]._is_xml?b.decode(p[e].xml):p[e]:"undefined"==typeof t?null:t},deleteKey:function(e){return r(e),e in p&&(delete p[e],"object"==typeof p.__jstorage_meta.TTL&&e in p.__jstorage_meta.TTL&&delete p.__jstorage_meta.TTL[e],delete p.__jstorage_meta.CRC32[e],i(),o(),n(e,"deleted"),!0)},setTTL:function(e,t){var n=+new Date;return r(e),t=Number(t)||0,e in p&&(p.__jstorage_meta.TTL||(p.__jstorage_meta.TTL={}),0<t?p.__jstorage_meta.TTL[e]=n+t:delete p.__jstorage_meta.TTL[e],i(),s(),o(),!0)},getTTL:function(e){var t=+new Date;return r(e),e in p&&p.__jstorage_meta.TTL&&p.__jstorage_meta.TTL[e]?(e=p.__jstorage_meta.TTL[e]-t)||0:0},flush:function(){return p={__jstorage_meta:{CRC32:{}}},i(),o(),n(null,"flushed"),!0},storageObj:function(){function e(){}return e.prototype=p,new e},index:function(){var e,t=[];for(e in p)p.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return m},currentBackend:function(){return _},storageAvailable:function(){return!!_},listenKeyChange:function(e,t){r(e),h[e]||(h[e]=[]),h[e].push(t)},stopListening:function(e,t){if(r(e),h[e])if(t)for(var n=h[e].length-1;0<=n;n--)h[e][n]==t&&h[e].splice(n,1);else delete h[e]},subscribe:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");S[e]||(S[e]=[]),S[e].push(t)},publish:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");p.__jstorage_meta||(p.__jstorage_meta={}),p.__jstorage_meta.PubSub||(p.__jstorage_meta.PubSub=[]),p.__jstorage_meta.PubSub.unshift([+new Date,e,t]),i(),o()},reInit:function(){e()},noConflict:function(e){return delete window.$.jStorage,e&&(window.jStorage=this),this}},function(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(e){}if(e)try{window.localStorage&&(f=window.localStorage,_="localStorage",v=f.jStorage_update)}catch(e){}else if("globalStorage"in window)try{window.globalStorage&&(f="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],_="globalStorage",v=f.jStorage_update)}catch(e){}else{if(g=document.createElement("link"),!g.addBehavior)return void(g=null);g.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(g);try{g.load("jStorage")}catch(e){g.setAttribute("jStorage","{}"),g.save("jStorage"),g.load("jStorage")}e="{}";try{e=g.getAttribute("jStorage")}catch(e){}try{v=g.getAttribute("jStorage_update")}catch(e){}f.jStorage=e,_="userDataBehavior"}a(),s(),"localStorage"==_||"globalStorage"==_?"addEventListener"in window?window.addEventListener("storage",t,!1):document.attachEvent("onstorage",t):"userDataBehavior"==_&&setInterval(t,1e3),c(),"addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&t()},!1)}()}()}]);